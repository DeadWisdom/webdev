# 11ty (Eleventy) Reference Guide

Eleventy is a simpler static site generator that transforms templates into HTML. Zero client-side JavaScript by default, zero-config to start, and works with multiple template languages.

## Installation

```bash
# Requires Node.js 18+
bun add -d @11ty/eleventy

# Build site
bunx @11ty/eleventy

# Dev server with hot reload
bunx @11ty/eleventy --serve
```

## Quick Start

```
site/
├── _includes/        # Layouts and partials
│   └── base.html
├── _data/            # Global data files
│   └── site.json
├── posts/            # Content directory
│   ├── posts.json    # Directory data (applies to all posts)
│   └── first-post.md
├── index.md          # Homepage
└── eleventy.config.js
```

Minimal `eleventy.config.js`:

```javascript
export default function(eleventyConfig) {
  return {
    dir: {
      input: "src",      // default: "."
      output: "_site",   // default: "_site"
      includes: "_includes",
      data: "_data"
    }
  };
};
```

---

## Template Languages

Eleventy supports: HTML, Markdown, Nunjucks, Liquid, JavaScript, WebC, Handlebars, Mustache, EJS, Pug, HAML.

Recommended: **HTML** (Nunjucks) for layouts, **Markdown** for content.

---

## Layouts

Layouts wrap content. Place in `_includes/` directory.

**`_includes/base.html`:**
```html
<!DOCTYPE html>
<html>
<head>
  <title>{{ title }}</title>
</head>
<body>
  {{ content | safe }}
</body>
</html>
```

**Content file using layout:**
```markdown
---
layout: base.html
title: The Page
---

# Hello World

This content replaces `{{ content }}` in the layout.
```

### Layout Chaining

Layouts can wrap other layouts:

```yaml
# _includes/post.html
---
layout: base.html
---
<article>{{ content | safe }}</article>
```

---

## Front Matter

YAML metadata at the top of template files:

```yaml
---
title: Post Title
date: 2025-01-15
tags: [blog, tutorial]
layout: post.html
permalink: /custom-url/
eleventyExcludeFromCollections: false
---
```

Common front matter keys:
- `layout` — Template wrapper
- `title` — Page title
- `date` — Override file creation date
- `tags` — Collection membership
- `permalink` — Custom output URL
- `eleventyExcludeFromCollections` — Remove from collections

---

## Data Cascade

Data merges from multiple sources (highest priority first):

1. **Computed Data** — Dynamic values from `eleventyComputed`
2. **Front Matter** — Template YAML
3. **Template Data Files** — `page.11tydata.js` alongside template
4. **Directory Data Files** — `posts/posts.json` applies to all in folder
5. **Layout Front Matter** — From layout chain
6. **Global Data** — Files in `_data/` directory

### Global Data Files

**`_data/site.json`:**
```json
{
  "name": "Site",
  "url": "https://example.com"
}
```

Access in templates: `{{ site.name }}`

**`_data/nav.js`** (dynamic data):
```javascript
export default function() {
  return [
    { title: "Home", url: "/" },
    { title: "About", url: "/about/" }
  ];
}
```

### Directory Data

**`posts/posts.json`** applies to all templates in `posts/`:
```json
{
  "layout": "post.html",
  "tags": "post"
}
```

---

## Collections

Group content by tags for iteration.

### Creating Collections

```yaml
---
tags: post
---
```

Multiple tags:
```yaml
---
tags:
  - post
  - featured
---
```

### Using Collections in Templates

```html
<ul>
{% for post in collections.post %}
  <li>
    <a href="{{ post.url }}">{{ post.data.title }}</a>
    <time>{{ post.date | dateFormat }}</time>
  </li>
{% endfor %}
</ul>
```

### Reverse Order (newest first)

```html
{% for post in collections.post | reverse %}
```

### Custom Collections

```javascript
// eleventy.config.js
export default function(eleventyConfig) {
  eleventyConfig.addCollection("featured", function(collectionApi) {
    return collectionApi.getFilteredByTag("post")
      .filter(item => item.data.featured);
  });
};
```

### Collection Item Properties

- `url` — Output URL
- `date` — Date object
- `data` — All front matter and data
- `content` — Rendered content (no layout)

---

## Filters

Transform data in templates.

### Built-in Filters

- `url` — Normalize paths for subdirectories
- `slugify` — URL-friendly strings
- `log` — Debug output to console

### Custom Filters

```javascript
// eleventy.config.js
export default function(eleventyConfig) {
  eleventyConfig.addFilter("dateFormat", function(date) {
    return new Date(date).toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });
  });

  // Async filter
  eleventyConfig.addFilter("fetchData", async function(url) {
    const res = await fetch(url);
    return res.json();
  });
};
```

Usage: `{{ post.date | dateFormat }}`

---

## Shortcodes

Reusable template components.

### Basic Shortcode

```javascript
eleventyConfig.addShortcode("year", function() {
  return new Date().getFullYear();
});

eleventyConfig.addShortcode("image", function(src, alt) {
  return `<img src="${src}" alt="${alt}" loading="lazy">`;
});
```

Usage:
```html
<p>© {% year %}</p>
{% image "/img/photo.jpg", "A photo" %}
```

### Paired Shortcode

```javascript
eleventyConfig.addPairedShortcode("callout", function(content, type = "info") {
  return `<div class="callout callout-${type}">${content}</div>`;
});
```

Usage:
```html
{% callout "warning" %}
  This is important!
{% endcallout %}
```

---

## Permalinks

Control output URLs:

```yaml
---
permalink: /blog/{{ title | slugify }}/
---
```

Dynamic permalinks with data:
```yaml
---
permalink: /{{ category }}/{{ page.fileSlug }}/
---
```

Disable output (data-only file):
```yaml
---
permalink: false
---
```

---

## Pagination

Generate pages from data.

### Paginate Collections

```yaml
---
pagination:
  data: collections.post
  size: 10
  alias: posts
permalink: /blog/{% if pagination.pageNumber > 0 %}page/{{ pagination.pageNumber + 1 }}/{% endif %}
---

{% for post in posts %}
  <article>{{ post.data.title }}</article>
{% endfor %}

<nav>
  {% if pagination.href.previous %}<a href="{{ pagination.href.previous }}">Previous</a>{% endif %}
  {% if pagination.href.next %}<a href="{{ pagination.href.next }}">Next</a>{% endif %}
</nav>
```

### Generate Pages from Data

```yaml
---
pagination:
  data: authors
  size: 1
  alias: author
permalink: /author/{{ author.slug }}/
---

<h1>{{ author.name }}</h1>
```

---

## Plugins

### Image Optimization

```bash
bun add -d @11ty/eleventy-img
```

```javascript
import Image from "@11ty/eleventy-img";

export default function(eleventyConfig) {
  eleventyConfig.addShortcode("image", async function(src, alt, widths = [300, 600]) {
    let metadata = await Image(src, {
      widths,
      formats: ["webp", "jpeg"],
      outputDir: "./_site/img/"
    });

    return Image.generateHTML(metadata, {
      alt,
      loading: "lazy",
      decoding: "async"
    });
  });
};
```

### Syntax Highlighting

```bash
bun add -d @11ty/eleventy-plugin-syntaxhighlight
```

```javascript
import syntaxHighlight from "@11ty/eleventy-plugin-syntaxhighlight";

export default function(eleventyConfig) {
  eleventyConfig.addPlugin(syntaxHighlight);
};
```

### RSS Feed

```bash
bun add -d @11ty/eleventy-plugin-rss
```

```javascript
import rssPlugin from "@11ty/eleventy-plugin-rss";

export default function(eleventyConfig) {
  eleventyConfig.addPlugin(rssPlugin);
};
```

### Navigation

```bash
bun add -d @11ty/eleventy-navigation
```

```javascript
import navigationPlugin from "@11ty/eleventy-navigation";

export default function(eleventyConfig) {
  eleventyConfig.addPlugin(navigationPlugin);
};
```

---

## Passthrough Copy

Copy static assets without processing:

```javascript
export default function(eleventyConfig) {
  // Copy single directory
  eleventyConfig.addPassthroughCopy("css");
  eleventyConfig.addPassthroughCopy("img");

  // Copy with rename
  eleventyConfig.addPassthroughCopy({ "src/assets": "assets" });

  // Copy by glob
  eleventyConfig.addPassthroughCopy("**/*.pdf");
};
```

---

## Watch & Ignore

```javascript
export default function(eleventyConfig) {
  // Watch additional files
  eleventyConfig.addWatchTarget("./src/css/");

  // Ignore files
  eleventyConfig.ignores.add("README.md");
  eleventyConfig.ignores.add("drafts/**");
};
```

---

## Common Patterns

### Blog Structure

```
src/
├── _data/
│   └── site.json
├── _includes/
│   ├── base.html
│   └── post.html
├── posts/
│   ├── posts.json      # { "layout": "post.html", "tags": "post" }
│   ├── first-post.md
│   └── second-post.md
├── blog.html            # Post listing with pagination
└── index.html
```

### Active Page Navigation

```html
<nav>
{% for item in nav %}
  <a href="{{ item.url }}"{% if page.url == item.url %} aria-current="page"{% endif %}>
    {{ item.title }}
  </a>
{% endfor %}
</nav>
```

### Conditional Content

```html
{% if post.data.featured %}
  <span class="badge">Featured</span>
{% endif %}

{% for tag in post.data.tags %}
  <a href="/tags/{{ tag | slugify }}/">{{ tag }}</a>
{% endfor %}
```

---

## Resources

- **Documentation:** https://www.11ty.dev/docs/
- **Starter Projects:** https://www.11ty.dev/docs/starter/
- **Plugins:** https://www.11ty.dev/docs/plugins/
- **Community:** https://www.11ty.dev/docs/community/
